# 18. 四数之和

https://leetcode.cn/problems/4sum/

`medium`

**<font color=red>使用双指针法而不是哈希表</font>**

## 题目描述

> 给你一个由 `n` 个整数组成的数组 `nums` ，和一个目标值 `target` 。请你找出并返回满足下述全部条件且**不重复**的四元组 `[nums[a], nums[b], nums[c], nums[d]]` （若两个四元组元素一一对应，则认为两个四元组重复）：
>
> - `0 <= a, b, c, d < n`
> - `a`、`b`、`c` 和 `d` **互不相同**
> - `nums[a] + nums[b] + nums[c] + nums[d] == target`
>
> 你可以按 **任意顺序** 返回答案 。
>
>  
>
> **示例 1：**
>
> ```
> 输入：nums = [1,0,-1,0,-2,2], target = 0
> 输出：[[-2,-1,1,2],[-2,0,0,2],[-1,0,0,1]]
> ```
>
> **示例 2：**
>
> ```
> 输入：nums = [2,2,2,2,2], target = 8
> 输出：[[2,2,2,2]]
> ```



## Core

- 双指针法，和三数之和类似，但是要多嵌套一个循环，五数之和，六数之和也如此
- 注意特殊情况，当数组里的数量小于4时



## Code

时间复杂度为 O(n^3)，空间复杂度为 O(n)

```swift
class Solution {
    func fourSum(_ nums: [Int], _ target: Int) -> [[Int]] {
        var res = [[Int]]()
        let sortedNums = nums.sorted()
        let n = nums.count 
        if n < 4 {
            return res
        }
        for i in 0 ..< n - 3 {
            if i > 0, sortedNums[i] == sortedNums[i - 1] {
                continue
            }
            for j in i + 1 ..< n - 2 {
                if j > i + 1, sortedNums[j] == sortedNums[j - 1] {
                    continue
                }
                var left = j + 1
                var right = n - 1
                while left < right {
                    let sum = sortedNums[i] + sortedNums[j] + sortedNums[left] + sortedNums[right]
                    if sum == target {
                        res.append([sortedNums[i], sortedNums[j], sortedNums[left], sortedNums[right]])
                        while left < right, sortedNums[left] == sortedNums[left + 1] {
                            left += 1
                        }
                        while left < right, sortedNums[right] == sortedNums[right - 1] {
                            right -= 1
                        }
                        left += 1
                        right -= 1
                    } else if sum < target {
                        left += 1
                    } else {
                        right -= 1
                    }
                }
            }
        }
        return res
    }
}
```

