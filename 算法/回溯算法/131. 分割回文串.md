# 131. 分割回文串

https://leetcode.cn/problems/palindrome-partitioning/

`medium`

**<font color=red>切割问题:想到与回溯算法相关</font>**

## 题目描述

> 给你一个字符串 `s`，请你将 `s` 分割成一些子串，使每个子串都是 **回文串** 。返回 `s` 所有可能的分割方案。
>
> **回文串** 是正着读和反着读都一样的字符串。
>
>  
>
> **示例 1：**
>
> ```
> 输入：s = "aab"
> 输出：[["a","a","b"],["aa","b"]]
> ```
>
> **示例 2：**
>
> ```
> 输入：s = "a"
> 输出：[["a"]]
> ```



## Core

- 想到与回溯算法相关



## Code

**时间复杂度分析：**

1. `isPalindrome` 函数的时间复杂度为 O(n)，其中 n 是子串的长度。这是因为在最坏情况下，需要比较所有字符一次。
2. `backtracing` 函数的主要部分是一个嵌套循环，其中外层循环从 `startIndex` 到字符串末尾，内层循环从 `startIndex` 到字符串末尾。对于每个子串，`isPalindrome` 函数的调用时间复杂度为 O(n)，因此每个子串的处理时间复杂度为 O(n^2)。因此，总体时间复杂度为 O(n^3)，其中 n 是字符串的长度。

**空间复杂度分析：**

1. `s` 数组占用 O(n) 的额外空间，其中 n 是字符串的长度。
2. `res` 数组存储所有分割方案，其空间取决于回文串分割的情况。在最坏情况下，所有字符都是单独的回文串，此时可能会有 O(n) 个回文串。每个回文串的长度总和也是 O(n)。因此，`res` 数组的总空间复杂度为 O(n^2)。
3. `path` 数组存储当前回溯路径，最大长度为字符串的长度，因此空间复杂度为 O(n)。

综上所述，总体空间复杂度为 O(n^2)，时间复杂度为 O(n^3)。

```swift
class Solution {
    func partition(_ s: String) -> [[String]] {
        let s = Array(s)
        // 使用双指针法判断子串是否回文
        func isPalindrome(_ start: Int, _ end: Int) -> Bool {
            var start = start
            var end = end
            while start < end {
                if s[start] != s[end] {
                    return false
                }
                start += 1
                end -= 1
            }
            return true
        }
        var res = [[String]]()
        var path = [String]()
        func backtracing(_ startIndex: Int) {
            if startIndex >= s.count {
                res.append(path)
                return
            }
            guard startIndex < s.count else {
                return
            }
            for i in startIndex ..< s.count {
                guard isPalindrome(startIndex, i) else {
                    continue
                }
                let subString = String(s[startIndex ... i])
                path.append(subString)
                backtracing(i + 1)
                if !path.isEmpty {
                    path.removeLast()
                }
            }
        }
        backtracing(0)
        return res
    }
}
```