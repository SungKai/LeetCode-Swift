# 342. 4的幂

https://leetcode.cn/problems/power-of-four/

**<font color=red>位运算与二进制</font>**

## 题目描述

> 给定一个整数，写一个函数来判断它是否是 4 的幂次方。如果是，返回 `true` ；否则，返回 `false` 。
>
> 整数 `n` 是 4 的幂次方需满足：存在整数 `x` 使得 `n == 4x`
>
>  
>
> **示例 1：**
>
> ```
> 输入：n = 16
> 输出：true
> ```
>
> **示例 2：**
>
> ```
> 输入：n = 5
> 输出：false
> ```
>
> **示例 3：**
>
> ```
> 输入：n = 1
> 输出：true
> ```

## Core

- 位运算与二进制

- 首先我们考虑一个数字是不是 2 的（整数）次方：如果一个数字 *n* 是 2 的整数次方，那么它

  的二进制一定是 0...010...0 这样的形式；考虑到 *n* − 1 的二进制是 0...001...1，这两个数求按位与

  的结果一定是 0。因此如果 n & (n - 1) 为 0，那么这个数是 2 的次方。

- 判断是否满足 n = 4^x^：

  ```swift
  (num & 0x55555555) != 0
  ```

  1. `0x55555555` 是一个十六进制数，它的二进制表示中，**只有奇数位是1，偶数位是0**。例如，`0x55555555` 的二进制表示为 `01010101010101010101010101010101`。
  2. 当将 `num` 与 `0x55555555` 进行按位与运算时，只有 `num` 的奇数位会保留下来，而偶数位会被清零。
  3. 如果 `(num & 0x55555555) != 0` 成立，意味着 `num` 的奇数位上至少有一个为1。因为4的幂次方的二进制表示中，只有奇数位上的位为1，偶数位上的位都为0，所以这个条件用来判断 `num` 是否是4的幂次方。

## Code

O(1), O(1)

```swift
class Solution {
    func isPowerOfFour(_ num: Int) -> Bool {
        if num <= 0 {
            return false
        }
        // 首先判断是否是2的幂次方，同时判断是否是偶数
        if num & (num - 1) != 0 {
            return false
        }
        return (num & 0x55555555) != 0
    }
}
```

